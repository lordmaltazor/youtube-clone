(this["webpackJsonpvideo-website"]=this["webpackJsonpvideo-website"]||[]).push([[0],{32:function(e,t,i){},33:function(e,t,i){"use strict";i.r(t);var n=i(4),a=i.n(n),s=i(18),c=i.n(s),o=i(10),r=i(9);i(28),i(29);r.a.initializeApp({apiKey:"AIzaSyDzhyM9tKzvTtLX7Nb8QvkJjDg4chCxThY",authDomain:"video-website-7d3ef.firebaseapp.com",projectId:"video-website-7d3ef",storageBucket:"video-website-7d3ef.appspot.com",messagingSenderId:"984504137450",appId:"1:984504137450:web:6c2cd33d704918de540993"});var l=r.a.firestore(),d=r.a.auth(),u=i(19),b=i(20),j=i(3);function v(){return Object(j.jsxs)("div",{className:"sign-in-page",children:[Object(j.jsx)("h1",{className:"sign-in-title",children:"Welcome to YuoTube!"}),Object(j.jsx)("button",{className:"sign-in-button",onClick:function(){var e=new r.a.auth.GoogleAuthProvider;d.signInWithPopup(e)},children:"Sign in with Google"})]})}function h(e){var t=e.setPage;return Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)("button",{className:"navbar-button title",onClick:function(){return t(0)},children:"YuoTube"}),Object(j.jsx)("div",{className:"navbar-spacer"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return t(0)},children:"Home"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return t(2)},children:"Upload"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return d.signOut()},children:"Sign out"})]})}function m(e){var t=e.video,i=e.onClick;return Object(j.jsxs)("button",{className:"video-thumbnail",onClick:i,children:[Object(j.jsx)("div",{className:"thumbnail-container",children:Object(j.jsx)("img",{className:"thumbnail",src:t.thumbnailURL,alt:"Video Thumbnail"})}),Object(j.jsx)("p",{className:"video-thumbnail-title",children:t.title}),Object(j.jsx)("p",{className:"video-thumbnail-views gray-text",children:function(e){for(var t=e.toLowerCase().split(" "),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].substring(1);return t.join(" ")}(t.poster)}),Object(j.jsxs)("p",{className:"video-thumbnail-views gray-text",children:[t.views," ",1===t.views?"View":"Views"," \u2022 ",t.createdAt&&t.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})}function p(e){var t=e.videos,i=e.setPage,n=e.setCurrentVideoIndex;return Object(j.jsx)("div",{className:"homepage",children:Object(j.jsx)("div",{className:"videos",children:t.map((function(e,t){return Object(j.jsx)(m,{video:e,onClick:function(){n(t),i(1)}},t)}))})})}function O(e){var t=e.videoURL,i=e.video,a=Object(n.useState)(!1),s=Object(o.a)(a,2),c=s[0],d=s[1];Object(n.useEffect)((function(){l.collection("videos").doc(i.id).update({views:r.a.firestore.FieldValue.increment(1)})}),[]);return Object(j.jsxs)("div",{className:"video-page",children:[Object(j.jsx)("div",{className:"video-container",children:Object(j.jsx)("video",{src:t,controls:!0,autoPlay:!0,children:"Sorry, your browser doesn't support embedded videos."})}),Object(j.jsxs)("div",{className:"video-info",children:[Object(j.jsxs)("div",{className:"video-stats",children:[Object(j.jsx)("p",{className:"video-stat",children:i.title}),Object(j.jsx)("p",{className:"video-stat gray-text",children:function(e){for(var t=e.toLowerCase().split(" "),i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].substring(1);return t.join(" ")}(i.poster)}),Object(j.jsxs)("p",{className:"video-stat gray-text",children:[i.views," ",1===i.views?"View":"Views"," \u2022 ",i.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),Object(j.jsxs)("button",{className:"video-like-button",onClick:function(){c?(d(!1),l.collection("videos").doc(i.id).update({likes:r.a.firestore.FieldValue.increment(-1)})):(d(!0),l.collection("videos").doc(i.id).update({likes:r.a.firestore.FieldValue.increment(1)}))},children:[Object(j.jsx)("i",{className:"fas fa-thumbs-up",style:{color:c?"red":"white"}}),Object(j.jsxs)("p",{className:"video-stat",children:[i.likes," ",1===i.likes?"Like":"Likes"]})]})]})]})}var f=i(14),x=i.n(f),g=i(21);i(32);function N(e){var t=e.user,i=e.setPage,a=Object(n.useRef)(null),s=Object(n.useRef)(null),c=Object(n.useState)(null),d=Object(o.a)(c,2),u=d[0],b=d[1],v=Object(n.useState)(null),h=Object(o.a)(v,2),m=h[0],p=h[1],O=Object(n.useState)(""),f=Object(o.a)(O,2),N=f[0],w=f[1],k=Object(n.useState)(!1),C=Object(o.a)(k,2),y=C[0],S=C[1],L=l.collection("videos"),U=function(e){if(0===e)return"n/a";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return 0===t?e:(e/Math.pow(1024,t)).toFixed(1)},V=function(){var e=Object(g.a)(x.a.mark((function e(){var n,a,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=N){e.next=3;break}return alert("You have to enter a video title!"),e.abrupt("return");case 3:return S(!0),n=r.a.storage().ref().child("videos/".concat(u.name)),e.next=7,n.put(u);case 7:return a=r.a.storage().ref().child("thumbnails/".concat(u.name)),e.next=10,a.put(m);case 10:return e.next=12,n.getDownloadURL();case 12:return s=e.sent,e.next=15,a.getDownloadURL();case 15:return c=e.sent,e.next=18,L.add({title:N,videoURL:s,thumbnailURL:c,poster:t.displayName,views:0,likes:0,createdAt:r.a.firestore.FieldValue.serverTimestamp()});case 18:S(!1),i(0);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"upload-video-page",children:[Object(j.jsx)("h1",{className:"upload-video-title",children:"Upload a new video to yuotube:"}),!u&&Object(j.jsx)("button",{className:"select-file-button",onClick:function(){return a.current.click()},children:"Choose Video"}),!m&&Object(j.jsx)("button",{className:"select-file-button",onClick:function(){return s.current.click()},children:"Choose Thumbnail"}),Object(j.jsx)("input",{className:"file-input",ref:a,onChange:function(e){var t=e.target.files[0];U(t.size)<10?(b(t),console.log("Added "+a.current.files[0].name+"!")):alert("Your files cannot be bigger than 10mb, yours was ".concat(U(t.size),"mb!"))},type:"file",accept:"video/*"}),Object(j.jsx)("input",{className:"file-input",ref:s,onChange:function(e){p(e.target.files[0])},type:"file",accept:"image/*"}),u&&m&&Object(j.jsx)("input",{className:"video-title-input",onChange:function(e){w(e.target.value)},type:"text",placeholder:"Video title"}),u&&m&&Object(j.jsx)("button",{className:"post-video-button",onClick:V,children:"Post"}),y&&Object(j.jsxs)("div",{className:"uploading-video-modal",children:[Object(j.jsx)("div",{className:"loading-circle"}),Object(j.jsx)("p",{className:"uploading-video-text",children:"Uploading video..."})]})]})}function w(){var e=Object(u.a)(d),t=Object(o.a)(e,1)[0],i=Object(n.useState)(0),a=Object(o.a)(i,2),s=a[0],c=a[1],r=l.collection("videos"),m=Object(b.a)(r,{idField:"id"}),f=Object(o.a)(m,1)[0],x=Object(n.useState)(null),g=Object(o.a)(x,2),w=g[0],k=g[1];return Object(j.jsxs)("div",{className:"app",children:[t&&Object(j.jsx)(h,{setPage:c}),t?2===s?Object(j.jsx)(N,{user:t,setPage:c}):f?1===s?Object(j.jsx)(O,{videoURL:f[w].videoURL,video:f[w]}):Object(j.jsx)(p,{videos:f,videoDocs:f,setPage:c,setCurrentVideoIndex:k}):Object(j.jsx)("div",{className:"app loading-app",children:Object(j.jsx)("div",{className:"loading-circle"})}):Object(j.jsx)(v,{})]})}var k=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,34)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),k()}},[[33,1,2]]]);
//# sourceMappingURL=main.76523919.chunk.js.map