(this["webpackJsonpvideo-website"]=this["webpackJsonpvideo-website"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var i=n(4),a=n.n(i),s=n(18),c=n.n(s),o=n(21),r=n(10),l=n(9);n(28),n(29);l.a.initializeApp({apiKey:"AIzaSyDzhyM9tKzvTtLX7Nb8QvkJjDg4chCxThY",authDomain:"video-website-7d3ef.firebaseapp.com",projectId:"video-website-7d3ef",storageBucket:"video-website-7d3ef.appspot.com",messagingSenderId:"984504137450",appId:"1:984504137450:web:6c2cd33d704918de540993"});var d=l.a.firestore(),u=l.a.auth(),b=n(19),j=(n(30),n(3));function v(){return Object(j.jsxs)("div",{className:"sign-in-page",children:[Object(j.jsx)("h1",{className:"sign-in-title",children:"Welcome to YuoTube!"}),Object(j.jsx)("button",{className:"sign-in-button",onClick:function(){var e=new l.a.auth.GoogleAuthProvider;u.signInWithPopup(e),alert("You are now signed in to YuoTube!")},children:"Sign in with Google"})]})}function h(e){var t=e.setPage;return Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)("button",{className:"navbar-button title",onClick:function(){return t(0)},children:"YuoTube"}),Object(j.jsx)("div",{className:"navbar-spacer"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return t(0)},children:"Home"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return t(2)},children:"Upload"}),Object(j.jsx)("button",{className:"navbar-button",onClick:function(){return u.signOut()},children:"Sign out"})]})}function m(e){var t=e.video,n=e.onClick;return Object(j.jsxs)("button",{className:"video-thumbnail",onClick:n,children:[Object(j.jsx)("div",{className:"thumbnail-container",children:Object(j.jsx)("img",{className:"thumbnail",src:t.thumbnailURL,alt:"Video Thumbnail"})}),Object(j.jsx)("p",{className:"video-thumbnail-title",children:t.title}),Object(j.jsx)("p",{className:"video-thumbnail-views gray-text",children:function(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].substring(1);return t.join(" ")}(t.poster)}),Object(j.jsxs)("p",{className:"video-thumbnail-views gray-text",children:[t.views," ",1===t.views?"View":"Views"," \u2022 ",t.createdAt&&t.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})}function p(e){var t=e.videos,n=e.setPage,i=e.setCurrentVideoIndex;return Object(j.jsx)("div",{className:"homepage",children:Object(j.jsx)("div",{className:"videos",children:t.length>0?t.map((function(e,t){return Object(j.jsx)(m,{video:e,onClick:function(){i(t),n(1)}},t)})):Object(j.jsx)("p",{className:"no-videos-message",children:'There are no videos here yet! Click the "upload" button in the navigation-bar to upload the first video!'})})})}function f(e){var t=e.videoURL,n=e.video,a=Object(i.useState)(!1),s=Object(r.a)(a,2),c=s[0],o=s[1];Object(i.useEffect)((function(){d.collection("videos").doc(n.id).update({views:l.a.firestore.FieldValue.increment(1)})}),[]);return Object(j.jsxs)("div",{className:"video-page",children:[Object(j.jsx)("div",{className:"video-container",children:Object(j.jsx)("video",{src:t,controls:!0,autoPlay:!0,children:"Sorry, your browser doesn't support embedded videos."})}),Object(j.jsxs)("div",{className:"video-info",children:[Object(j.jsxs)("div",{className:"video-stats",children:[Object(j.jsx)("p",{className:"video-stat",children:n.title}),Object(j.jsx)("p",{className:"video-stat gray-text",children:function(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].substring(1);return t.join(" ")}(n.poster)}),Object(j.jsxs)("p",{className:"video-stat gray-text",children:[n.views," ",1===n.views?"View":"Views"," \u2022 ",n.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),Object(j.jsxs)("button",{className:"video-like-button",onClick:function(){c?(o(!1),d.collection("videos").doc(n.id).update({likes:l.a.firestore.FieldValue.increment(-1)})):(o(!0),d.collection("videos").doc(n.id).update({likes:l.a.firestore.FieldValue.increment(1)}))},children:[Object(j.jsx)("i",{className:"fas fa-thumbs-up",style:{color:c?"red":"white"}}),Object(j.jsxs)("p",{className:"video-stat",children:[n.likes," ",1===n.likes?"Like":"Likes"]})]})]})]})}var O=n(14),g=n.n(O),x=n(20);n(33);function N(e){var t=e.user,n=e.videos,a=e.setPage,s=Object(i.useRef)(null),c=Object(i.useRef)(null),o=Object(i.useState)(null),u=Object(r.a)(o,2),b=u[0],v=u[1],h=Object(i.useState)(null),m=Object(r.a)(h,2),p=m[0],f=m[1],O=Object(i.useState)(""),N=Object(r.a)(O,2),w=N[0],k=N[1],C=Object(i.useState)(!1),y=Object(r.a)(C,2),S=y[0],L=y[1],U=d.collection("videos"),V=function(e){if(0===e)return"n/a";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return 0===t?e:(e/Math.pow(1024,t)).toFixed(1)},P=function(){var e=Object(x.a)(g.a.mark((function e(){var i,s,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=w){e.next=3;break}return alert("You have to enter a video title!"),e.abrupt("return");case 3:return L(!0),i=l.a.storage().ref().child("videos/".concat(b.name)),e.next=7,i.put(b);case 7:return s=l.a.storage().ref().child("thumbnails/".concat(b.name)),e.next=10,s.put(p);case 10:return e.next=12,i.getDownloadURL();case 12:return c=e.sent,e.next=15,s.getDownloadURL();case 15:return o=e.sent,e.next=18,U.add({title:w,videoURL:c,thumbnailURL:o,poster:t.displayName,views:0,likes:0,index:n.length,createdAt:l.a.firestore.FieldValue.serverTimestamp()});case 18:L(!1),a(0);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"upload-video-page",children:[Object(j.jsx)("h1",{className:"upload-video-title",children:"Upload a new video to yuotube:"}),!b&&Object(j.jsx)("button",{className:"select-file-button",onClick:function(){return s.current.click()},children:"Choose Video"}),!p&&Object(j.jsx)("button",{className:"select-file-button",onClick:function(){return c.current.click()},children:"Choose Thumbnail"}),Object(j.jsx)("input",{className:"file-input",ref:s,onChange:function(e){var t=e.target.files[0];V(t.size)<10?(v(t),console.log("Added "+s.current.files[0].name+"!")):alert("Your files cannot be bigger than 10mb, yours was ".concat(V(t.size),"mb!"))},type:"file",accept:"video/*"}),Object(j.jsx)("input",{className:"file-input",ref:c,onChange:function(e){f(e.target.files[0])},type:"file",accept:"image/*"}),b&&p&&Object(j.jsx)("input",{className:"video-title-input",onChange:function(e){k(e.target.value)},type:"text",placeholder:"Video title"}),b&&p&&Object(j.jsx)("button",{className:"post-video-button",onClick:P,children:"Post"}),S&&Object(j.jsxs)("div",{className:"uploading-video-modal",children:[Object(j.jsx)("div",{className:"loading-circle"}),Object(j.jsx)("p",{className:"uploading-video-text",children:"Uploading video..."})]})]})}function w(){var e=Object(b.a)(u),t=Object(r.a)(e,1)[0],n=Object(i.useState)(0),a=Object(r.a)(n,2),s=a[0],c=a[1],l=d.collection("videos"),m=Object(i.useState)([]),O=Object(r.a)(m,2),g=O[0],x=O[1],w=Object(i.useState)(null),k=Object(r.a)(w,2),C=k[0],y=k[1];return Object(i.useEffect)((function(){t&&l.get().then((function(e){for(var t=[],n=0;n<e.docs.length;n++)t.push(Object(o.a)({id:e.docs[n].id},e.docs[n].data()));x(t)}))}),[l]),Object(j.jsxs)("div",{className:"app",children:[t&&Object(j.jsx)(h,{setPage:c}),t?2===s?Object(j.jsx)(N,{user:t,videos:g,setPage:c}):1===s?Object(j.jsx)(f,{videoURL:g[C].videoURL,video:g[C]}):Object(j.jsx)(p,{videos:g,videoDocs:g,setPage:c,setCurrentVideoIndex:y}):Object(j.jsx)(v,{})]})}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),k()}},[[34,1,2]]]);
//# sourceMappingURL=main.0a9ffa27.chunk.js.map